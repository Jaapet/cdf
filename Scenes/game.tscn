[gd_scene load_steps=37 format=3 uid="uid://oc0f7f5ace5q"]

[ext_resource type="PackedScene" uid="uid://cc6ysyvr2gfw7" path="res://Scenes/player.tscn" id="1_hh0f2"]
[ext_resource type="Script" path="res://Scripts/GameManager.cs" id="1_nousa"]
[ext_resource type="PackedScene" uid="uid://emffocpuh6g7" path="res://Scenes/spawner.tscn" id="2_ageex"]
[ext_resource type="Script" path="res://Scripts/Parallax.cs" id="3_0eejo"]
[ext_resource type="Texture2D" uid="uid://dnrrkcyay2xce" path="res://Assets/Sprites/player_idle.png" id="3_7ejat"]
[ext_resource type="Shader" path="res://Assets/Shaders/water.gdshader" id="3_uhnxy"]
[ext_resource type="PackedScene" uid="uid://c4t4cgcxdclbw" path="res://Scenes/health.tscn" id="4_0frve"]
[ext_resource type="PackedScene" uid="uid://cvfc40sf8kfge" path="res://Scenes/barrels_ui.tscn" id="4_454lg"]
[ext_resource type="Texture2D" uid="uid://dt82sdg4n3xbk" path="res://Assets/Sprites/player_idle_no_jump.png" id="4_phm8i"]
[ext_resource type="Script" path="res://Scripts/Camera.gd" id="5_a0gx0"]
[ext_resource type="PackedScene" uid="uid://0g0jmgfi4uwm" path="res://Scenes/ui.tscn" id="5_ljph4"]
[ext_resource type="AudioStream" uid="uid://co20gh167838k" path="res://Assets/Musics/100BPMto110.wav" id="9_ml4vl"]
[ext_resource type="Texture2D" uid="uid://bm6y1i84cdf1q" path="res://Assets/Sprites/people.png" id="9_mpl80"]
[ext_resource type="Texture2D" uid="uid://dmvpreqy2akhd" path="res://Assets/Sprites/JO.png" id="10_bbvhy"]
[ext_resource type="Texture2D" uid="uid://bo2uo84wg5wq4" path="res://Assets/Sprites/big_upper_dock.png" id="10_bwv0p"]
[ext_resource type="PackedScene" uid="uid://cepp8621o2u36" path="res://Scenes/barrel.tscn" id="13_3ka8y"]
[ext_resource type="Texture2D" uid="uid://d3trt1qflyc1g" path="res://Assets/Sprites/big_down_dock.png" id="13_uitgb"]
[ext_resource type="Texture2D" uid="uid://whhd6au7w8ru" path="res://Assets/Sprites/bridge.png" id="13_wnmi4"]
[ext_resource type="PackedScene" uid="uid://bvrll0xf7ocuj" path="res://Scenes/heart.tscn" id="15_4gge5"]
[ext_resource type="Script" path="res://Scripts/ShipSpawner.cs" id="15_5daxq"]
[ext_resource type="PackedScene" path="res://Scenes/clouds.tscn" id="15_5p8al"]
[ext_resource type="PackedScene" uid="uid://c66wcrgh1p3tw" path="res://Scenes/water_ship.tscn" id="15_rsmds"]
[ext_resource type="Texture2D" uid="uid://be75wtjt3lr53" path="res://Assets/Sprites/clouds.png" id="19_xutjo"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_g2qtt"]
size = Vector2(631, 98)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_pygm4"]
size = Vector2(69, 431)

[sub_resource type="ShaderMaterial" id="ShaderMaterial_8pr1o"]

[sub_resource type="Gradient" id="Gradient_8elpm"]
offsets = PackedFloat32Array(0, 0.977778)
colors = PackedColorArray(0, 0, 0, 0.611765, 0, 0, 0, 0.584314)

[sub_resource type="GradientTexture1D" id="GradientTexture1D_qcyc2"]
gradient = SubResource("Gradient_8elpm")

[sub_resource type="Gradient" id="Gradient_t6grn"]
colors = PackedColorArray(0, 0, 0, 0.74902, 0, 0, 0, 0.623529)

[sub_resource type="GradientTexture1D" id="GradientTexture1D_n0vby"]
gradient = SubResource("Gradient_t6grn")

[sub_resource type="ShaderMaterial" id="ShaderMaterial_1wjby"]
shader = ExtResource("3_uhnxy")
shader_parameter/OCTAVE = 3
shader_parameter/mulscale = 10.0
shader_parameter/height = 0.25
shader_parameter/tide = 0.02
shader_parameter/foamthickness = 0.05
shader_parameter/timescale = 1.0
shader_parameter/waterdeep = 0.3
shader_parameter/WATER_COL = Color(0, 0.45098, 0.443137, 0.333333)
shader_parameter/WATER2_COL = Color(0, 1, 1, 0.219608)
shader_parameter/FOAM_COL = Color(0.898966, 0.875189, 0.693735, 0.709804)

[sub_resource type="PlaceholderTexture2D" id="PlaceholderTexture2D_qwaq5"]
size = Vector2(500, 500)

[sub_resource type="ShaderMaterial" id="ShaderMaterial_jp6w3"]
shader = ExtResource("3_uhnxy")
shader_parameter/OCTAVE = 6
shader_parameter/mulscale = 5.0
shader_parameter/height = 0.6
shader_parameter/tide = 0.1
shader_parameter/foamthickness = 0.1
shader_parameter/timescale = 1.0
shader_parameter/waterdeep = 0.3
shader_parameter/WATER_COL = Color(0.04, 0.38, 0.88, 1)
shader_parameter/WATER2_COL = Color(0.0392157, 0.282353, 0.780392, 1)
shader_parameter/FOAM_COL = Color(0.8125, 0.9609, 0.9648, 1)

[sub_resource type="CanvasItemMaterial" id="CanvasItemMaterial_05nkv"]
particles_animation = true
particles_anim_h_frames = 3
particles_anim_v_frames = 3
particles_anim_loop = false

[sub_resource type="ParticleProcessMaterial" id="ParticleProcessMaterial_cl81h"]
particle_flag_disable_z = true
emission_shape = 3
emission_box_extents = Vector3(1, 300, 1)
direction = Vector3(-1, 0, 0)
spread = 10.0
initial_velocity_min = 20.0
initial_velocity_max = 30.0
gravity = Vector3(-20, 0, 0)
scale_max = 2.0
color = Color(1, 1, 1, 0.286275)
anim_offset_max = 1.0

[sub_resource type="Environment" id="Environment_0hrqe"]
background_mode = 3
tonemap_mode = 1
tonemap_white = 1.3
glow_enabled = true
glow_normalized = true
glow_intensity = 0.33
glow_strength = 0.5
glow_bloom = 0.05
glow_blend_mode = 1
glow_hdr_threshold = 0.77
glow_map_strength = 0.31
adjustment_enabled = true
adjustment_brightness = 0.84
adjustment_contrast = 1.55
adjustment_saturation = 0.69

[node name="Game" type="Node2D"]
script = ExtResource("1_nousa")

[node name="Player" parent="." instance=ExtResource("1_hh0f2")]
unique_name_in_owner = true
z_index = 1
position = Vector2(117, -54)
normalSpriteSheet = ExtResource("3_7ejat")
noJumpSpriteSheet = ExtResource("4_phm8i")
verticalSpeed = 150.0
horizontalSpeed = 80.0

[node name="UI" parent="." instance=ExtResource("5_ljph4")]

[node name="Health" parent="UI" instance=ExtResource("4_0frve")]

[node name="BarrelsUI" parent="UI" instance=ExtResource("4_454lg")]
offset_left = -65.0
offset_bottom = 43.0

[node name="Camera2D" type="Camera2D" parent="."]
unique_name_in_owner = true
position = Vector2(270, 86)
zoom = Vector2(2, 2)
limit_left = -100
limit_top = -10
limit_bottom = 10
limit_smoothed = true
position_smoothing_enabled = true
editor_draw_limits = true
script = ExtResource("5_a0gx0")

[node name="Timer" type="Timer" parent="Camera2D"]

[node name="Limits" type="Node2D" parent="."]

[node name="DockCollision" type="StaticBody2D" parent="Limits"]
position = Vector2(-15, -194)
collision_layer = 2

[node name="CollisionShape2D" type="CollisionShape2D" parent="Limits/DockCollision"]
position = Vector2(305.5, 0)
shape = SubResource("RectangleShape2D_g2qtt")

[node name="DockCollision2" type="StaticBody2D" parent="Limits"]
position = Vector2(-11, -193)
collision_layer = 2

[node name="CollisionShape2D" type="CollisionShape2D" parent="Limits/DockCollision2"]
position = Vector2(298, 299)
shape = SubResource("RectangleShape2D_g2qtt")

[node name="Left" type="StaticBody2D" parent="Limits"]
collision_layer = 2

[node name="CollisionShape2D" type="CollisionShape2D" parent="Limits/Left"]
position = Vector2(-37.5, -76.5)
shape = SubResource("RectangleShape2D_pygm4")

[node name="Right" type="StaticBody2D" parent="Limits"]
position = Vector2(643, 7)
collision_layer = 2

[node name="CollisionShape2D" type="CollisionShape2D" parent="Limits/Right"]
position = Vector2(-37.5, 3)
shape = SubResource("RectangleShape2D_pygm4")

[node name="MusicStreamPlayer2D" type="AudioStreamPlayer2D" parent="."]
stream = ExtResource("9_ml4vl")
volume_db = -80.0
autoplay = true
bus = &"Music"

[node name="Backgrounds" type="Node2D" parent="."]

[node name="UpperDockParallaxBackground" type="ParallaxBackground" parent="Backgrounds"]
layer = -1
script = ExtResource("3_0eejo")

[node name="ParallaxLayer" type="ParallaxLayer" parent="Backgrounds/UpperDockParallaxBackground"]
position = Vector2(9, -44)
motion_mirroring = Vector2(5000, 0)

[node name="UpperDockSprite2D" type="Sprite2D" parent="Backgrounds/UpperDockParallaxBackground/ParallaxLayer"]
material = SubResource("ShaderMaterial_8pr1o")
position = Vector2(2474, -158)
scale = Vector2(1, 1.2)
texture = ExtResource("10_bwv0p")

[node name="PeopleSprite2D" type="Sprite2D" parent="Backgrounds/UpperDockParallaxBackground/ParallaxLayer"]
visible = false
position = Vector2(175, -178)
texture = ExtResource("9_mpl80")

[node name="JOSprite2D" type="Sprite2D" parent="Backgrounds/UpperDockParallaxBackground/ParallaxLayer"]
visible = false
position = Vector2(137, -108)
texture = ExtResource("10_bbvhy")

[node name="UpperDockUnderWaterParallaxBackground" type="ParallaxBackground" parent="Backgrounds"]
layer = -3
script = ExtResource("3_0eejo")

[node name="ParallaxLayer" type="ParallaxLayer" parent="Backgrounds/UpperDockUnderWaterParallaxBackground"]
position = Vector2(9, -44)
motion_mirroring = Vector2(500, 0)

[node name="DockSprite2D" type="Sprite2D" parent="Backgrounds/UpperDockUnderWaterParallaxBackground/ParallaxLayer"]
z_index = -1
position = Vector2(191, -77)
scale = Vector2(1.95313, 23)
texture = SubResource("GradientTexture1D_qcyc2")

[node name="DownDockParallaxBackground" type="ParallaxBackground" parent="Backgrounds"]
layer = 1
script = ExtResource("3_0eejo")

[node name="ParallaxLayer" type="ParallaxLayer" parent="Backgrounds/DownDockParallaxBackground"]
position = Vector2(-7, -61)
motion_mirroring = Vector2(5000, 0)

[node name="DownDockSprite2D" type="Sprite2D" parent="Backgrounds/DownDockParallaxBackground/ParallaxLayer"]
z_index = 5
z_as_relative = false
position = Vector2(2474, 135)
texture = ExtResource("13_uitgb")

[node name="ShadowSprite2D" type="Sprite2D" parent="Backgrounds/DownDockParallaxBackground/ParallaxLayer/DownDockSprite2D"]
z_index = -1
position = Vector2(-22, -21)
scale = Vector2(1.95312, 11)
texture = SubResource("GradientTexture1D_n0vby")

[node name="WaterParallaxBackground" type="ParallaxBackground" parent="Backgrounds"]
layer = -2
script = ExtResource("3_0eejo")

[node name="ParallaxLayer" type="ParallaxLayer" parent="Backgrounds/WaterParallaxBackground"]
motion_mirroring = Vector2(1e+06, 0)

[node name="WaterSprite2D" type="Sprite2D" parent="Backgrounds/WaterParallaxBackground/ParallaxLayer"]
material = SubResource("ShaderMaterial_1wjby")
position = Vector2(14965, 11412.5)
scale = Vector2(60.86, 53.594)
texture = SubResource("PlaceholderTexture2D_qwaq5")

[node name="ColorRect" type="ColorRect" parent="Backgrounds/WaterParallaxBackground"]
visible = false
z_index = -1
material = SubResource("ShaderMaterial_jp6w3")
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2

[node name="BridgeParallaxBackground" type="ParallaxBackground" parent="Backgrounds"]
layer = 2
script = ExtResource("3_0eejo")

[node name="ParallaxLayer" type="ParallaxLayer" parent="Backgrounds/BridgeParallaxBackground"]
motion_mirroring = Vector2(4300, 0)

[node name="BridgeSprite2D" type="Sprite2D" parent="Backgrounds/BridgeParallaxBackground/ParallaxLayer"]
z_index = 2
position = Vector2(681, -79)
scale = Vector2(1, 1.73)
texture = ExtResource("13_wnmi4")

[node name="ShadowSprite2D" type="Sprite2D" parent="Backgrounds/BridgeParallaxBackground/ParallaxLayer/BridgeSprite2D"]
z_index = -1
position = Vector2(-2.57492e-05, 130.636)
scale = Vector2(0.359375, 294.798)
texture = SubResource("GradientTexture1D_qcyc2")

[node name="Barrel" parent="." instance=ExtResource("13_3ka8y")]
position = Vector2(510, -64)

[node name="CloudsParticles2D" parent="." instance=ExtResource("15_5p8al")]
material = SubResource("CanvasItemMaterial_05nkv")
position = Vector2(682, -8)
amount = 12
process_material = SubResource("ParticleProcessMaterial_cl81h")
texture = ExtResource("19_xutjo")
lifetime = 10.0
visibility_rect = Rect2(-500, 0, 1e+06, 1e+06)

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_0hrqe")

[node name="BarrelSpawner" parent="." instance=ExtResource("2_ageex")]
position = Vector2(589, -59)
objScene = ExtResource("13_3ka8y")
maxTime = 15.0
upY = -75.0
downY = 75.0

[node name="HeartSpawner" parent="." instance=ExtResource("2_ageex")]
position = Vector2(589, -59)
objScene = ExtResource("15_4gge5")
maxTime = 10.0
upY = -75.0
downY = 75.0

[node name="ShipSpawner" parent="." instance=ExtResource("2_ageex")]
position = Vector2(589, -59)
script = ExtResource("15_5daxq")
objScene = ExtResource("15_rsmds")
minTime = 5.0
maxTime = 12.0

[connection signal="Healed" from="Player" to="UI/Health" method="OnPlayerHealed"]
[connection signal="TakedDamage" from="Player" to="UI/Health" method="OnPlayerTakedDamage"]
[connection signal="TakedDamage" from="Player" to="Camera2D" method="OnPlayerTakedDamage"]
